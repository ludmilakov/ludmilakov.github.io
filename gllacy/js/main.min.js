ymaps.ready(function(){var d=new ymaps.Map("ya-map",{center:[59.939346,30.329383],zoom:16,controls:[]},{suppressMapOpenBlock:!0},{searchControlProvider:"yandex#search"}),c=new ymaps.Placemark([59.938669,30.323057],{},{iconLayout:"default#image",iconImageHref:"img/mark.png",iconImageSize:[218,142],iconImageOffset:[-39,-139]});d.geoObjects.add(c),d.controls.remove("rulerControl"),d.controls.remove("searchControl"),d.controls.remove("trafficControl"),d.controls.remove("typeSelector"),d.controls.remove("zoomControl"),d.controls.remove("geolocationControl"),d.controls.remove("routeEditor")});var link=document.querySelector(".contacts-info-button"),popup=document.querySelector(".feedback-form"),overlay=document.querySelector(".feedback-form-overlay"),close=popup.querySelector(".feedback-form-close"),form=popup.querySelector("form"),username=popup.querySelector("[name=username]"),email=popup.querySelector("[name=email]"),comment=popup.querySelector("[name=comment]"),storage_user=localStorage.getItem("username"),storage_email=localStorage.getItem("email");link.addEventListener("click",function(b){b.preventDefault(),popup.classList.add("feedback-form-show"),overlay.classList.add("feedback-form-overlay-show"),storage_user&&storage_email?(username.value=storage_user,email.value=storage_email,comment.focus()):username.focus()}),close.addEventListener("click",function(b){b.preventDefault(),popup.classList.remove("feedback-form-show"),popup.classList.remove("feedback-form-error"),overlay.classList.remove("feedback-form-overlay-show")}),form.addEventListener("submit",function(b){username.value&&email.value&&comment.value?(localStorage.setItem("username",username.value),localStorage.setItem("email",email.value)):(b.preventDefault(),popup.classList.remove("feedback-form-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("feedback-form-error"))}),window.addEventListener("keydown",function(b){27===b.keyCode&&popup.classList.contains("feedback-form-show")&&(popup.classList.remove("feedback-form-show"),popup.classList.remove("feedback-form-error"),overlay.classList.remove("feedback-form-overlay-show"))}),overlay.addEventListener("click",function(b){popup.classList.contains("feedback-form-show")&&(popup.classList.remove("feedback-form-show"),popup.classList.remove("feedback-form-error"),overlay.classList.remove("feedback-form-overlay-show"))});